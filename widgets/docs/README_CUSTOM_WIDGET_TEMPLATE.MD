# Custom Widget Configuration UI

A custom widget requires a widget configuration UI for dashboard management UI. This UI is generated by the [BVD Plugin Manager](./README_CUSTOM_WIDGET_API.MD#bvdpluginmanager-api).

It generates the UI based on the *customProperty* field in the widget configuration. *customProperty* in the widget configuration is an array of objects that must contain a set of properties, as described below:

| Property      | Type         | Description  |
|:------------- |:-------------|:-------------|
| id            | string       | Unique ID of the property |
| type          | string       | String of any supported input type: *'number'*, *'text'*, or *'channel'* |
| label         | string       | Label that will be displayed in the Manage Dashboards UI |
| mandatory     | boolean      | Indicate that the property is mandatory for proper functionality of the widget (optional, default=false)
| default       | object       | Default value of this property (optional) |


Custom property example:

```javascript
{
  ...
  customProperty: [
    {
      id: 'my_custom_property',
      label: 'My Custom Label',
      type: 'number',
      default: 100,
      mandatory: true
    },
    {
      id: 'my_custom_channel',
      label: 'My Custom Channel',
      type: 'channel'
    }
  ]
  ...
}
```

Do not use **opr** to prefix custom properties IDs, as this prefix is reserved for BVD internal use. The only exception is the ID **opr_coloring_rule** which is explained in the section _Special Properties_ below.

### Default Properties

The following properties are created for each custom widget and cannot be removed:

| ID                  | Description  |
|:-------------       |:-------------|
| opr_field           | Created if **hasData** is set to true in the [widget configuration object](./README_CUSTOM_WIDGET_API.MD) |
| opr_channel         | Created if **hasDataChannel** is set to true in the [widget configuration object](./README_CUSTOM_WIDGET_API.MD) |
| opr_visibility_rule | Created if **hasDataChannel** is set to true in the [widget configuration object](./README_CUSTOM_WIDGET_API.MD). This allows the user to control the visibility of this widget. Refer to the BVD widget documentation for details. |
| opr_hyperlink       | Alway created. Allows the specification of an URL which is opened when the user clicks on this widget. Refer to the BVD widget documentation for details. |

### Special Properties

 **opr_coloring_rule**: String
   - _Functionality_: If a custom property with this ID is added to a widget, BVD will calculate a status color based on this string, as described in the BVD widget documentation. Custom widgets can get the resulting color string from the **getStatusColor** function of the context object passed to the widget init callback. This color can be used in the **onChange** and **onInit** handlers to color the widget or parts of the widget.
